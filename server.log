
> sec-incentive@0.1.0 dev:api
> tsx api/server.ts

ğŸš€ API Server running on http://localhost:3001
ğŸ“ Available endpoints:
   GET /api/health - Health check
ğŸ” Authentication:
   POST /api/auth/send-otp - Send OTP to SEC phone
   POST /api/auth/verify-otp - Verify OTP and login SEC
   POST /api/auth/admin-login - Admin login
   PUT /api/auth/update-profile - Update SEC profile
   POST /api/auth/logout - Logout user
ğŸ“Š Data:
   GET /api/stores - Fetch all stores
   GET /api/samsung-skus - Fetch all Samsung SKUs
   GET /api/samsung-skus/:id/plans - Fetch plans for specific SKU
   GET /api/plans - Fetch all plans
   GET /api/plan-price?skuId=:id&planType=:type - Get specific plan price
ğŸ“ Reports:
   POST /api/reports/submit - Submit sales report
   GET /api/reports/sec - Get SEC user reports
   GET /api/reports/admin - Get all reports (admin)
ğŸ“ Fetching all stores...
âœ… Found 714 stores
ğŸ“ Fetching all stores...
âœ… Found 714 stores
âœ… Test submission created for SEC 9569310917, Score: 70%
ğŸ“ Fetching all stores...
âœ… Found 714 stores
ğŸ“ Fetching all stores...
âœ… Found 714 stores
ğŸ“ Fetching all stores...
âœ… Found 714 stores
ğŸ“ Fetching all stores...
âœ… Found 714 stores
ğŸ“ Fetching all stores...
ğŸ“± Fetching Samsung SKUs...
âœ… Fetched 0 deductions for SEC 68f1cc510e61d44e4d4a6df8
âœ… Fetched 0 deductions for SEC 68f1cc510e61d44e4d4a6df8
âœ… Found 714 stores
ğŸ“ Fetching all stores...
âœ… Found 24 Samsung SKUs
ğŸ“± Fetching Samsung SKUs...
âœ… Found 24 Samsung SKUs
âœ… Found 714 stores
âœ… Fetched 0 deductions for SEC 68f1cc510e61d44e4d4a6df8
âœ… Fetched 0 deductions for SEC 68f1cc510e61d44e4d4a6df8
âœ… Fetched 0 deductions for SEC 68f1cc510e61d44e4d4a6df8
ğŸ“ Fetching all stores...
âœ… Found 714 stores
ğŸ“ Fetching all stores...
âœ… Found 714 stores
ğŸ—‘ï¸ Deleted all previous OTP records for 9569310917
ğŸ“± Sending OTP 715621 to WhatsApp number: 919569310917
âœ… WhatsApp OTP sent successfully via Comify to 919569310917
âœ… New OTP sent to 9569310917, Session ID: 6902130ad0c5857ab8910bed
ğŸ” /verify-otp called { query: [Object: null prototype] {}, bodyKeys: [ 'phone', 'otp' ] }
âœ… Valid OTP found for 9569310917, Session ID: 6902130ad0c5857ab8910bed
ğŸ” Checking SEC user existence for 9569310917
âœ… Existing SEC user found and updated for phone: 9569310917
ğŸ” Referral capture check { newUserCreated: false, referralCode: undefined }
ğŸ” Generating JWT for user 68f1cc510e61d44e4d4a6df8, phone: 9569310917
âœ… JWT token generated successfully for 9569310917
âœ… SEC with phone 9569310917 logged in successfully
ğŸ“ Fetching all stores...
ğŸ“± Fetching Samsung SKUs...
âœ… Found 24 Samsung SKUs
ğŸ“± Fetching Samsung SKUs...
âœ… Fetched 0 deductions for SEC 68f1cc510e61d44e4d4a6df8
âœ… Found 24 Samsung SKUs
âœ… Fetched 0 deductions for SEC 68f1cc510e61d44e4d4a6df8
âœ… Found 714 stores
ğŸ“ Fetching all stores...
âœ… Found 714 stores
